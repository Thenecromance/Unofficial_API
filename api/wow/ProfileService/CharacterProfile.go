package wowRetail

// AUTOMATICALLY GENERATED FILE, DO NOT EDIT
// This file is generated by tools/updater
// Author: @Thenecromance
import (
	"Unofficial_API/ApiError"
	"Unofficial_API/bridge/client"
	"Unofficial_API/global"
	"Unofficial_API/internal"
	"context"
	"encoding/json"
)

//CharacterProfileSummary Returns a profile summary for a character.
//@see: /profile/wow/character/{realmSlug}/{characterName}

func StringCharacterProfileSummary(ctx context.Context,
	realmSlug string, characterName string,
) (string, error) {

	cookies := map[string]string{
		"blizzard_user_info": global.GetCookie(),
	}
	return client.GETWithCookies("https://webapi.blizzard.cn/wow-armory-server/api/index", cookies, "realm_slug", realmSlug, "role_name", characterName)
}

func CNCharacterProfileSummary(ctx context.Context,
	realmSlug string, characterName string,
) (any, error) {

	obj, err := StringCharacterProfileSummary(ctx, realmSlug, characterName)

	if err != nil {
		return nil, err
	}
	var resp struct {
		Code int                              `json:"code"`
		Msg  string                           `json:"msg"`
		Data *CharacterProfileSummaryResponse `json:"data"`
	}

	// TODO: this method need to support Other several Methods, so I need to fix it later

	err = json.Unmarshal([]byte(obj), &resp)
	if err != nil {
		return nil, err
	}

	return resp.Data, nil
}

func BNetCharacterProfileSummary(ctx context.Context,
	realmSlug string, characterName string,
) (any, error) {

	obj, err := CNCharacterProfileSummary(ctx, realmSlug, characterName)
	if err != nil {
		return nil, err
	}

	return obj.(*CharacterProfileSummaryResponse).ToBNet(), nil
}

//CharacterProfileStatus Returns the status and a unique ID for a character. A client should delete information about a character from their application if any of the following conditions occur:<ul><li>an HTTP 404 Not Found error is returned</li><li>the is_valid value is false</li><li>the returned character ID doesn't match the previously recorded value for the character</li></ul>The following example illustrates how to use this endpoint:<ol><li>A client requests and stores information about a character, including its unique character ID and the timestamp of the request.</li><li>After 30 days, the client makes a request to the status endpoint to verify if the character information is still valid.</li><li>If character cannot be found, is not valid, or the characters IDs do not match, the client removes the information from their application.</li><li>If the character is valid and the character IDs match, the client retains the data for another 30 days.</li></ol>
//@see: /profile/wow/character/{realmSlug}/{characterName}/status

func StringCharacterProfileStatus(ctx context.Context,
	realmSlug string, characterName string,
) (string, error) {
	/*client :=*/ basicImpl.NewRequest()
	/*token := */ internal.TryToGetToken(realmSlug, characterName)
	return "", ApiError.ErrorNotSupported
}

func CNCharacterProfileStatus(ctx context.Context,
	realmSlug string, characterName string,
) (any, error) {

	obj, err := StringCharacterProfileStatus(ctx, realmSlug, characterName)
	if err != nil {
		return nil, err
	}
	resp := &CharacterProfileStatusResponse{}
	err = json.Unmarshal([]byte(obj), resp)
	if err != nil {
		return nil, err
	}

	return resp, nil
}

func BNetCharacterProfileStatus(ctx context.Context,
	realmSlug string, characterName string,
) (any, error) {

	obj, err := CNCharacterProfileStatus(ctx, realmSlug, characterName)
	if err != nil {
		return nil, err
	}

	return obj.(*CharacterProfileStatusResponse).ToBNet(), nil
}

/*

{"operationName":"GetRealmStatusData","variables":{"input":{"compoundRegionGameVersionSlug":"us"}},"extensions":{"persistedQuery":{"version":1,"sha256Hash":"b37e546366a58e211e922b8c96cd1ff74249f564a49029cc9737fef3300ff175"}}}
*/
